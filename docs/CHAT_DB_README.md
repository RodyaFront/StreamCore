# –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–∞—Ç–∞ Twitch

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞ Twitch –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** - —Ñ–∞–π–ª `chat_database.db` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π** - –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –°–æ–æ–±—â–µ–Ω–∏—è (messages)
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ —á–∞—Ç–∞
- –ö–æ–º–∞–Ω–¥—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–µ–∫—Å—Ç, –≤—Ä–µ–º—è, –∫–∞–Ω–∞–ª

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (user_stats)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–µ—Ä–≤–æ–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤
- –õ—é–±–∏–º—ã–µ —Å–ª–æ–≤–∞ (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl "http://localhost:3001/api/chat/stats/user?username=viewer123"

# –¢–æ–ø 10 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑—Ä–∏—Ç–µ–ª–µ–π
curl "http://localhost:3001/api/chat/stats/top?limit=10"

# –õ—é–±–∏–º—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl "http://localhost:3001/api/chat/stats/words?username=viewer123&limit=5"

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 20 —Å–æ–æ–±—â–µ–Ω–∏–π
curl "http://localhost:3001/api/chat/messages/recent?limit=20"

# –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
curl "http://localhost:3001/api/chat/stats/overview?period=-7 days"
```

## –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è

–ù–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

### 1. –°–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π
```javascript
function getUserLevel(messageCount) {
    if (messageCount < 10) return 1;
    if (messageCount < 50) return 2;
    if (messageCount < 100) return 3;
    if (messageCount < 500) return 4;
    return 5;
}
```

### 2. –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- üéØ –ü–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- üí¨ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
- üèÜ –¢–æ–ø-10 –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑—Ä–∏—Ç–µ–ª–µ–π
- üìù –õ—é–±–∏–º–æ–µ —Å–ª–æ–≤–æ –Ω–µ–¥–µ–ª–∏
- ‚è∞ –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∑—Ä–∏—Ç–µ–ª—å (—Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å)

### 3. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
–ù–∞ –æ—Å–Ω–æ–≤–µ –ª—é–±–∏–º—ã—Ö —Å–ª–æ–≤ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã:
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —á–∞—Å—Ç–æ –ø–∏—à–µ—Ç "–º—É–∑—ã–∫–∞" ‚Üí –Ω–∞–≥—Ä–∞–¥–∞ "–í—ã–±–æ—Ä –º—É–∑—ã–∫–∏"
- –ï—Å–ª–∏ —á–∞—Å—Ç–æ "–∏–≥—Ä–∞" ‚Üí –Ω–∞–≥—Ä–∞–¥–∞ "–í—ã–±–æ—Ä –∏–≥—Ä—ã"

### 4. –í–∏–¥–∂–µ—Ç—ã –¥–ª—è —Å—Ç—Ä–∏–º–∞
–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤–∏–¥–∂–µ—Ç—ã, –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∏–µ:
- –¢–æ–ø-5 —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑—Ä–∏—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —á–∞—Ç–∞ –∑–∞ —Å—Ç—Ä–∏–º
- –°–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ–≤–∞ –¥–Ω—è

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª—é–±–∏–º—ã—Ö —Å–ª–æ–≤

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª—é–±–∏–º—ã—Ö —Å–ª–æ–≤ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

```javascript
import { updateAllUsersFavoriteWords } from './chatStats.js';

// –û–±–Ω–æ–≤–∏—Ç—å –ª—é–±–∏–º—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ç–æ–ø-100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
updateAllUsersFavoriteWords();
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç–æ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ —á–∞—Å –∏–ª–∏ —Ä–∞–∑ –≤ –¥–µ–Ω—å).

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –ª—é–±–∏–º—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª—è–π—Ç–µ —Å—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–º–µ—Ä–∞ –ë–î** - SQLite –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–∞—Ö –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –∫–æ–¥–µ

```javascript
import { getUserDetailedStats } from './chatStats.js';

const stats = getUserDetailedStats('username');
console.log(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—Å–∞–ª ${stats.message_count} —Å–æ–æ–±—â–µ–Ω–∏–π`);
console.log(`–õ—é–±–∏–º—ã–µ —Å–ª–æ–≤–∞: ${stats.favorite_words.map(w => w.word).join(', ')}`);
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ Socket.IO

```javascript
// –í server.js
io.on('connection', (socket) => {
    socket.on('getUserStats', async (username) => {
        const stats = getUserDetailedStats(username);
        socket.emit('userStats', stats);
    });
});
```

