# Как начать логирование сообщений из чата Twitch

## Шаг 1: Настройка переменных окружения

Убедитесь, что у вас есть файл `.env` в корне проекта с настройками Twitch:

```env
TWITCH_ACCOUNT=ваш_ник_на_twitch
ACCESS_TOKEN=ваш_oauth_токен
```

### Как получить OAuth токен:

1. Перейдите на https://twitchtokengenerator.com/
2. Выберите scopes: `chat:read` и `chat:edit`
3. Скопируйте сгенерированный токен в `.env` файл

Или используйте официальный способ через Twitch Developer Console.

## Шаг 2: Запуск сервера

Для логирования сообщений достаточно запустить только сервер:

```bash
npm run server
```

Сервер автоматически:
- ✅ Создаст базу данных (если её нет)
- ✅ Подключится к Twitch IRC
- ✅ Начнет логировать все сообщения из чата

## Шаг 3: Проверка работы

После запуска сервера вы должны увидеть в консоли сообщения о подключении к Twitch.

Отправьте тестовое сообщение в чат вашего канала и проверьте:

```bash
npm run view-db
```

Или откройте в браузере:
```
http://localhost:3001/view-stats
```

## Что происходит автоматически:

1. **Каждое сообщение** из чата автоматически сохраняется в БД
2. **Статистика пользователей** обновляется в реальном времени
3. **Команды** (сообщения начинающиеся с `!`) помечаются отдельно

## Важно:

- Сервер должен быть запущен во время стрима для логирования
- Сообщения логируются только когда сервер работает
- База данных сохраняется в файле `chat_database.db`

## Если сообщения не записываются:

1. Проверьте, что сервер запущен и подключен к Twitch
2. Убедитесь, что `.env` файл настроен правильно
3. Проверьте консоль сервера на наличие ошибок
4. Убедитесь, что OAuth токен имеет правильные scopes (`chat:read`)

